# ---------------------------------------------
#       CONFIGURACIÓN DE LA APLICACIÓN
# ---------------------------------------------
# Nombre del microservicio
spring.application.name=Inventario
# Puerto único para este microservicio
server.port=8003

# ---------------------------------------------
#       CONEXIÓN A SQL SERVER (EN DOCKER)
# ---------------------------------------------
# Usamos el driver de SQL Server
spring.datasource.driver-class-name=com.microsoft.sqlserver.jdbc.SQLServerDriver

# ESTA ES LA URL CLAVE:
# 1. "sqlserver-db": Este NO es 'localhost'. Debe ser el "nombre del servicio"
#    de SQL Server dentro de tu futuro archivo 'docker-compose.yml'.
# 2. "1433": El puerto estándar de SQL Server.
# 3. "tpi_logistica_db": El nombre de tu BASE DE DATOS ÚNICA, como mencionaste.
spring.datasource.url=jdbc:sqlserver://sqlserver-db:1433;databaseName=tpi_logistica_db;trustServerCertificate=true

# Usamos autenticación SQL (usuario 'sa') porque 'integratedSecurity'
# (Autenticación de Windows) NO funciona dentro de contenedores Docker.
spring.datasource.username=sa
# Esta es la contraseña por defecto de la imagen de SQL Server en Docker.
# Asegúrate de que coincida con la que definas en tu 'docker-compose.yml'.
spring.datasource.password=yourStrong(!)Password

# ---------------------------------------------
#       CONFIGURACIÓN DE JPA (HIBERNATE)
# ---------------------------------------------
# 'update' permite a Hibernate modificar la BBDD (crear tablas, etc.)
# En producción se suele usar 'validate' o 'none'.
spring.jpa.hibernate.ddl-auto=update

# Muestra las consultas SQL en la consola (muy útil para debug)
spring.jpa.show-sql=true

# El dialecto moderno para SQL Server
spring.jpa.database-platform=org.hibernate.dialect.SQLServerDialect

# ---------------------------------------------
#       CONFIGURACIÓN DE KEYCLOAK (EN DOCKER)
# ---------------------------------------------
# Esta es la URL "issuer" de tu Keycloak.
# 1. "keycloak": Este debe ser el "nombre del servicio" de Keycloak
#    dentro de tu 'docker-compose.yml'.
# 2. "9090": El puerto que estás usando para Keycloak.
# 3. "/realms/tpi-backend": El realm que creaste para este proyecto.
spring.security.oauth2.resourceserver.jwt.issuer-uri=http://keycloak:9090/realms/tpi-backend